<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NWxSE Interactive Map</title>
  <!-- Leaflet core -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- Marker clustering (nice for lots of pins) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <style>
    html, body { height: 100%; margin: 0; }
    #map { height: 100vh; width: 100%; }
    .brand { position:absolute; left:16px; top:12px; z-index: 999; background:#fff; padding:8px 12px; border-radius:12px; box-shadow:0 4px 16px rgba(0,0,0,.12); font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; font-weight:600; letter-spacing:.2px; }
    .leaflet-control-layers { border-radius:12px; overflow:hidden; }
    .legend { position:absolute; right:16px; bottom:16px; z-index: 999; background:#fff; padding:12px 14px; border-radius:12px; box-shadow:0 4px 16px rgba(0,0,0,.12); font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .legend .row { display:flex; align-items:center; gap:8px; margin:4px 0; }
    .swatch { width:14px; height:14px; border-radius:50%; display:inline-block; }
    .note { position:absolute; left:16px; bottom:16px; background:#fff; padding:8px 10px; border-radius:10px; font: 12px/1.3 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:#444; box-shadow:0 4px 16px rgba(0,0,0,.12); }
  </style>
</head>
<body>
  <div class="brand">NWxSE Regional Map</div>
  <div id="map"></div>
  <div class="legend">
    <div class="row"><span class="swatch" style="background:#1f5b89"></span> Northwest</div>
    <div class="row"><span class="swatch" style="background:#7a5ba6"></span> Southeast</div>
    <div class="row"><span class="swatch" style="background:#f39c12"></span> Highlighted (⭐)</div>
  </div>
  <div class="note">Zoom • Pan • Click a pin for details. Embed this page in SharePoint via the <em>Embed</em> web part.</div>

  <script>
    // === COLORS (tweak here to match your deck) ===
    const COLORS = {
      nw: '#1f5b89',      // Northwest (Alera dark blue-ish)
      se: '#7a5ba6',      // Southeast (Alera purple-ish)
      star: '#f39c12',    // Starred/featured offices accent
      regionFillNW: 'rgba(31,91,137,0.12)',
      regionFillSE: 'rgba(122,91,166,0.12)',
      regionStroke: 'rgba(0,0,0,.3)'
    };

    // === MAP INIT ===
    const map = L.map('map', { zoomSnap: 0.5, worldCopyJump: true }).setView([37.5, -96], 4);

    // Base tiles (free, no key). Swap to your corporate tiles if desired.
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // === VERY SIMPLE REGION POLYGONS (approximate coverage for quick visual) ===
    // You can replace these with precise state GeoJSON later. These are bounding boxes for clarity.
   

    // === OFFICE DATA ===
    // Minimal fields: name, company, region: 'NW' | 'SE', lat, lng, address, featured: true for ⭐
    const offices = [
      // Florida & Southeast
      { name: 'Alera Group: Pensacola', company: 'Alera Group', region: 'SE', lat: 30.4213, lng: -87.2169, address: '1582 Airport Blvd, Pensacola, FL 32504', featured: true },
      { name: 'Whipple & Company', company: 'Whipple & Company', region: 'SE', lat: 26.3683, lng: -80.1289, address: '6100 Glades Rd, Ste 310, Boca Raton, FL 33434', featured: true },
      { name: 'Wilson Washburn & Forster', company: 'Wilson Washburn & Forster', region: 'SE', lat: 25.775, lng: -80.210, address: '16505 NW 13th Ave, Miami, FL 33169', featured: false },
      { name: 'Alera Group: North Palm Beach', company: 'Alera Group', region: 'SE', lat: 26.8171, lng: -80.0819, address: '116 Water Club Ct N, North Palm Beach, FL 33408', featured: false },

      // Georgia & Carolinas
      { name: 'Arista Consulting Group', company: 'Arista Consulting Group', region: 'SE', lat: 33.9526, lng: -84.5499, address: '2500 Dallas Hwy, Ste 202, Marietta, GA 30064', featured: false },
      { name: 'CORE Benefit Solutions', company: 'CORE Benefit Solutions', region: 'SE', lat: 33.7815, lng: -84.3525, address: '1409 N Highland Ave NE, Ste B, Atlanta, GA', featured: true },
      { name: 'Jowers-Sklar Insurance', company: 'Jowers-Sklar Insurance', region: 'SE', lat: 34.257, lng: -85.164, address: '706 E 2nd Ave SW, Rome, GA 30161', featured: false },
      { name: 'Champion Benefits (Alera Group)', company: 'Alera Group', region: 'SE', lat: 33.915, lng: -84.352, address: '1455 Lincoln Pkwy, Ste 100, Atlanta, GA', featured: true },
      { name: 'The Beck Agency (Propel)', company: 'Propel Insurance', region: 'SE', lat: 34.0754, lng: -84.2941, address: '4385 Kimball Bridge Rd, Ste 203, Alpharetta, GA 30022', featured: false },
      { name: 'Charlotte Office (Propel)', company: 'Propel Insurance', region: 'SE', lat: 35.2271, lng: -80.8431, address: 'Charlotte, NC', featured: false },
      { name: 'TriSure (formerly Bagwell & Bagwell)', company: 'TriSure', region: 'SE', lat: 35.8075, lng: -78.7000, address: '4325 Lake Boone Trail, Ste 200, Raleigh, NC 27607', featured: true },
      { name: 'John Hackney Agency', company: 'John Hackney Agency', region: 'SE', lat: 35.7213, lng: -77.9155, address: '3700 Nash St NW, Wilson, NC 27896', featured: false },

      // Tennessee
      { name: 'Propel – Knoxville', company: 'Propel Insurance', region: 'SE', lat: 35.9606, lng: -83.9207, address: 'Knoxville, TN', featured: false },
      { name: 'Propel – Maryville', company: 'Propel Insurance', region: 'SE', lat: 35.7565, lng: -83.9705, address: 'Maryville, TN', featured: false },

      // Colorado
      { name: 'Propel – Denver', company: 'Propel Insurance', region: 'SE', lat: 39.7392, lng: -104.9903, address: 'Denver, CO', featured: false },

      // Pacific Northwest (NW)
      { name: 'TRUEbenefits', company: 'TRUEbenefits', region: 'NW', lat: 47.609, lng: -122.334, address: '601 Union St, Ste 3400, Seattle, WA 98101', featured: true },
      { name: 'Propel – Seattle', company: 'Propel Insurance', region: 'NW', lat: 47.6062, lng: -122.3321, address: 'Seattle, WA', featured: false },
      { name: 'Propel – Tacoma', company: 'Propel Insurance', region: 'NW', lat: 47.2529, lng: -122.4443, address: 'Tacoma, WA', featured: false },
      { name: 'Propel – Portland', company: 'Propel Insurance', region: 'NW', lat: 45.5152, lng: -122.6784, address: 'Portland, OR', featured: false },
      { name: 'Propel – Medford', company: 'Propel Insurance', region: 'NW', lat: 42.3265, lng: -122.8756, address: 'Medford, OR', featured: false },

      // California (outside NW/SE but within national footprint)
      { name: 'Shomer Insurance Agency', company: 'Shomer Insurance Agency', region: 'NW', lat: 34.1511, lng: -118.449, address: '5805 Sepulveda Blvd, #500, Sherman Oaks, CA 90010', featured: true },

      // Extras requested
      { name: 'Propel – Alpharetta', company: 'Propel Insurance', region: 'SE', lat: 34.0754, lng: -84.2941, address: 'Alpharetta, GA', featured: false },
      { name: 'Propel – Atlanta', company: 'Propel Insurance', region: 'SE', lat: 33.749, lng: -84.388, address: 'Atlanta, GA', featured: false },
      { name: 'Propel – Rome', company: 'Propel Insurance', region: 'SE', lat: 34.257, lng: -85.164, address: 'Rome, GA', featured: false }
    ];

    // === ICON FACTORY ===
    function makeIcon(hex) {
      // Simple circle SVG as a Leaflet divIcon for crisp brand colors
      const svg = `\n        <svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n          <defs>\n            <filter id="s" x="-50%" y="-50%" width="200%" height="200%">\n              <feDropShadow dx="0" dy="1" stdDeviation="1" flood-color="rgba(0,0,0,.25)"/>\n            </filter>\n          </defs>\n          <circle cx="13" cy="13" r="7.8" fill="${hex}" filter="url(#s)" />\n          <circle cx="13" cy="13" r="8.8" fill="none" stroke="#fff" stroke-width="2" opacity=".9"/>\n        </svg>`;
      return L.divIcon({ className: 'pin', html: svg, iconSize: [26,26], iconAnchor: [13,13], popupAnchor: [0,-10] });
    }

    const iconNW = makeIcon(COLORS.nw);
    const iconSE = makeIcon(COLORS.se);
    const iconSTAR = makeIcon(COLORS.star);

    // === LAYERS ===
    const clusterNW = L.markerClusterGroup({ showCoverageOnHover:false, maxClusterRadius: 48 });
    const clusterSE = L.markerClusterGroup({ showCoverageOnHover:false, maxClusterRadius: 48 });

    offices.forEach(o => {
      const icon = o.featured ? iconSTAR : (o.region === 'NW' ? iconNW : iconSE);
      const m = L.marker([o.lat, o.lng], { icon })
        .bindPopup(`<strong>${o.name}</strong><br>${o.company}<br><small>${o.address || ''}</small><br><span style="opacity:.7">Region: ${o.region}</span>`);
      if (o.region === 'NW') clusterNW.addLayer(m); else clusterSE.addLayer(m);
    });

    const groupNW = L.layerGroup([nwPoly, clusterNW]).addTo(map);
    const groupSE = L.layerGroup([sePoly, clusterSE]).addTo(map);

    // Layers control
    L.control.layers(null, { 'Northwest': groupNW, 'Southeast': groupSE }, { collapsed: true, position: 'topright' }).addTo(map);

    // Fit to all markers
    const all = L.featureGroup([clusterNW, clusterSE]);
    map.fitBounds(all.getBounds().pad(0.2));

  </script>
</body>
</html>
